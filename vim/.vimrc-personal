" Basic stuff.
set hidden                            " Do not complain when switching buffers
set t_Co=256                          " Set 256 color terminal
set shell=/bin/bash                   " Set ! to bash, since I'm using non-POSIX fish

" Security.
set modelines=0                       " Do not parse modelines (security exploits!)

" Indentation.
"set autoindent                       " Don't set these,
"set smartindent                      " ...they don't work the way you'd expect.
filetype indent on
set tabstop=2
set softtabstop=2
set shiftwidth=2
set expandtab                         " Use spaces for tabs

" Saving files.
"set nofsync                          " Don't set this. Stops flushing after save. Bad idea.
set nobackup                          " Speed up saving: do not do backup, save, delete backup.

" Performance.
let loaded_matchparen = 1             " Do not load parenthesis-matching plugin (slow when scrolling)

" Parenthesis matching.
set showmatch                         " Shows matching parenthesis
set matchtime=10                      " How many ms to show the matching parenthesis.

" Navigation.
set whichwrap+=<,>,[,]                " Allow left-right keys to go around breaks.

" Interface.
set background=dark                   " Hint that the colorscheme being used is dark
set number                            " Show line numbers
set ruler                             " Show current line and column on status bar
"set cursorline                       " Highlights the current line
set laststatus=2                      " Always show the status line
set selectmode=mouse,key              " Allow going to selectmode using mouse (in GVim)
set fillchars=fold:\ ,diff:\ ,vert:\ ,stlnc:\ ,stl:\ 

" Invisible chars.
set list                              " Show invisible chars
set listchars=tab:▸\ ,trail:␣,nbsp:␣,extends:»,precedes:«

" Searching.
set incsearch                         " Incremental search
"set ignorecase                       " Set this to ignore case in searches
"set smartcase                        " ...except when the search has an uppercase letter

" Line wrap.
set textwidth=80                      " Says it all
set colorcolumn=+1                    " Hilight the column after textwidth
set nowrap                            " Don't wrap lines unless there's an actual newline character
set formatoptions=q                   " See below: (NOTE: had to remove j since it's not compatible with 7.3
"set formatoptions+=q                 " q = Allow use of gq to autowrap comments
"set formatoptions+=j                 " j = Remove comment leader when joining lines
set linebreak                         " When wrapping with gq, break lines at word boundaries

" Browsing and opening files.
set path=.,./**,                      " Where to search for files when using the gf command
set wildmode=list:longest,full        " Make Tab completion show a list, and not replace text with first match
set wildignore=*.o,*.obj,*.bak,*.exe,*.pyc  " Ignore these files
"set wildmenu                         " Make Tab completion use a statusbar menu

" Editing.
set backspace=start,indent            " Allow backspace to work over start of insert, and over indents, but not EOLs.

" File detection and syntax hilighting.
filetype on
syntax on

" Allow jumping to special parts of code (tags) with ctrl+].
set tags+=$HOME/.vim/tags/python.ctags
" The file above was created with $ ctags -R -f ~/.vim/tags/python.ctags /usr/lib/python2.5/

" Allow code completion with Ctrl-X Ctrl-O.
autocmd FileType python set omnifunc=pythoncomplete#Complete

" MiniBufExplorer plugin settings.
let g:miniBufExplUseSingleClick = 1
"let g:miniBufExplCheckDupeBufs = 0    " Disable filename disambiguation (too slow)

" ShowMarks plugin settings.
let g:showmarks_enable=0
let g:showmarks_textlower=" "
let g:showmarks_textupper=" "
let g:showmarks_textother=" "
let g:showmarks_include="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ."

" Custom key mapppings.
map <silent> <Leader>w gqip
map <silent> <Leader>t :NERDTreeToggle %:h<cr>
map <silent> <Leader>m :TMiniBufExplorer<cr>
map <silent> <Leader>h :set hlsearch!<cr>:ShowMarksToggle<cr>:RainbowParenthesesToggle<cr>:RainbowParenthesesLoadBraces<cr>:set hlsearch?<cr>
map <silent> <Leader>s :SlimuxREPLSendSelection<cr>
map <silent> <Leader>S :SlimuxREPLConfigure<cr>
map <silent> <Leader>u :GundoToggle<cr>
map <silent> <Leader>q :copen<cr>
map <silent> <Leader>Q :cclose<cr>
noremap <silent> <Leader>B :BuffergatorToggle<CR>
map <silent> <Leader>f :LustyFilesystemExplorer<CR>
map <silent> <Leader>F :LustyFilesystemExplorerFromHere<CR>
map <silent> <Leader>b :LustyBufferExplorer<CR>
map <silent> <Leader>g :LustyBufferGrep<CR>
map <silent> <Leader>l :set number<CR>
map <silent> <Leader>L :set relativenumber<CR>
map <silent> <Leader>/ :vimgrep <C-R><C-W> **<CR>
map <silent> <Leader>p :set paste!<CR>:set paste?<CR>

" Don't let plugins overwrite my Leader keymappings.
let g:buffergator_suppress_keymaps=1
let g:LustyExplorerDefaultMappings=0

" Get rid of trailing whitespace.
map gc :%s/[ <Tab>]\+$//<CR>

" Fix Chromebook "slow shift" issue.
map K k

" Disable dupe buf checking in new MiniBuf, since it's too slow.
let g:miniBufExplCheckDupeBufs=0

" Keymaps for Substitute command (delete and paste).
vmap S "_dP
nmap SS "_ddP
nmap Saw "_dawP
nmap Siw "_diwP
nmap Sw  "_diwP
nmap Sap "_dapP
nmap Sip "_dipP
nmap Sp  "_dipP

" NERDTree plugin options.
let g:NERDTreeMinimalUI=1
let g:NERDTreeHijackNetrw=0
